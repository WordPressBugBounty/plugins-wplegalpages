function alignSideBar(){function a(a){a.includes("settings")||a.includes("all_legal_pages")?b.style.top="185px":b.style.top="65px"}var b=document.querySelector(".wplp-sub-tabs");a(window.location.href.split("#")),document.querySelectorAll(".wplp-sub-tabs .wp-legalpages-admin-tab").forEach(function(b){b.addEventListener("click",function(){a([this.getAttribute("data-tab")])})})}var jQuery=jQuery.noConflict(),jQuery=jQuery.noConflict();jQuery(document).ready(function(){function a(a){var b=jQuery('<div class="wplegal-ajax-spinner"></div>');jQuery("#wpbody-content").append(b),jQuery.ajax({type:"POST",url:wplp_localize_data.ajaxurl,data:{action:"wp_legal_pages_app_store_auth",_ajax_nonce:wplp_localize_data._ajax_nonce,response:a.response,origin:a.origin},success:function(a){b.hide(),localStorage.removeItem("wplegalConnectPopupHide"),localStorage.removeItem("wplegalDisconnect");var c=window.location.origin,d="/wp-admin/admin.php?page=legal-pages",e="#settings#general",f=c+d+e;setTimeout(function(){window.location.href=f,location.reload()},100)},error:function(a){console.error("Error sending data to PHP:",a)}})}function b(a){a.preventDefault();var b=this.classList.contains("gdpr-signup"),c=jQuery('<div class="wplegal-ajax-spinner"></div>'),d=jQuery("#wpbody-content");d.css("position","relative"),d.append(c),jQuery.ajax({url:wplp_localize_data.ajaxurl,type:"POST",data:{action:"wp_legal_pages_app_start_auth",_ajax_nonce:wplp_localize_data._ajax_nonce,is_new_user:b},beforeSend:function(){c.show()},complete:function(){c.hide()}}).done(function(a){var b=window.innerWidth,c=window.innerHeight,d=1360,e=740,f=(b-d)/2,g=(c-e)/2,h=window.open(a.data.url,"_blank","location=no,width="+d+",height="+e+",left="+f+",top="+g+",scrollbars=0");null===h?console.log("Failed to open the authentication window"):h.focus()})}function c(a){a.preventDefault();var b=this.classList.contains("wplegal-api-connect-new"),c=jQuery('<div class="wplegal-ajax-spinner"></div>'),d=jQuery("#wpbody-content");d.css("position","relative"),d.append(c),jQuery.ajax({url:wplp_localize_data.ajaxurl,type:"POST",data:{action:"wp_legal_pages_app_paid_start_auth",_ajax_nonce:wplp_localize_data._ajax_nonce,is_new_user:b},beforeSend:function(){c.show()},complete:function(){c.hide()}}).done(function(a){var b=window.innerWidth,c=window.innerHeight,d=1260,e=740,f=(b-d)/2,g=(c-e)/2;null==window.open(a.data.url,"_blank","location=no,width="+d+",height="+e+",left="+f+",top="+g+",scrollbars=0")&&console.log("error while opening the popup window")})}function d(a){a.preventDefault();var b=(this.classList.contains("wplegal-api-connect-new"),this.classList.contains("wplegalpages-connection-popup")),c=jQuery('<div class="wplegal-ajax-spinner"></div>'),d=jQuery("#wpbody-content");d.css("position","relative"),d.append(c),jQuery.ajax({url:wplp_localize_data.ajaxurl,type:"POST",data:{action:"wp_legal_pages_app_paid_start_auth",_ajax_nonce:wplp_localize_data._ajax_nonce,is_user_from_connection_popup:!!b},beforeSend:function(){c.show()},complete:function(){c.hide()}}).done(function(a){var b=window.innerWidth,c=window.innerHeight,d=1260,e=740,f=(b-d)/2,g=(c-e)/2;null==window.open(a.data.url,"_blank","location=no,width="+d+",height="+e+",left="+f+",top="+g+",scrollbars=0")&&console.log("error while opening the popup window")})}function e(){jQuery("#wplegal-wpcc-notice").hide(),localStorage.setItem("wplegalConnectPopupHide","true")}function f(){jQuery("#wplegal-disconnect-wpcc-notice").hide(),localStorage.setItem("wplegalConnectPopupHide","true")}function g(){var a=jQuery('<div class="wplegal-ajax-spinner"></div>'),b=jQuery(".wplegal-connection-tab-card");b.css("position","relative"),b.append(a),jQuery.ajax({url:wplp_localize_data.ajaxurl,type:"POST",data:{action:"wp_legal_pages_app_delete_auth",_ajax_nonce:wplp_localize_data._ajax_nonce},beforeSend:function(){a.show()},complete:function(){a.hide()}}).done(function(a){location.reload()})}const h=wplp_localize_data.is_pro_activated,i=wplp_localize_data.admin_url,j=wplp_localize_data.lp_terms,k=wplp_localize_data.is_user_connected;h&&(jQuery(".wp-legalpages-admin-tabs-section").addClass("pro-is-activated"),jQuery(".wp-legalpages-admin-tab").addClass("pro-is-activated")),"1"!=j&&(jQuery(".wp-legalpages-admin-tab .wp-legalpages-admin-tab-name").addClass("lp-terms-not-acpt"),jQuery(".wplegal-help-card").addClass("lp-terms-not-acpt"),jQuery(".wplegal-container .wplegal-container-features .wplegal-features-section .wplegal-section-content .wplegal-feature").addClass("lp-terms-not-acpt"),jQuery(".wp-legalpages-admin-help-and-support .wp-legalpages-admin-help-text").addClass("lp-terms-not-acpt"),jQuery(".wp-legalpages-admin-help-and-support .wp-legalpages-admin-support-text").addClass("lp-terms-not-acpt")),jQuery(".wp-legalpages-admin-tab-content").not(":first").hide(),jQuery(".wp-legalpages-admin-getting-started-tab").addClass("active-tab"),jQuery(".wp-legalpages-admin-wplp-dashboard-tab").addClass("active-tab"),jQuery("#getting_started").show(),jQuery(".wp-legalpages-admin-getting-started-tab").hasClass("active-tab")?jQuery(".legalpages-tab").addClass("active-tab"):jQuery(".legalpages-tab").removeClass("active-tab"),jQuery(".wp-legalpages-admin-create_legalpages-tab").on("click",function(){window.location.href=i+"index.php?page=wplegal-wizard"}),jQuery(".wp-legalpages-admin-tabs").on("click",".wp-legalpages-admin-tab:not(.wp-legalpages-admin-create_legalpages-tab)",function(a){a.preventDefault();var b=jQuery(this).data("tab");jQuery(".wp-legalpages-admin-tab").removeClass("active-tab"),jQuery(".wp-legalpages-admin-tab-content").hide(),jQuery("#"+b).show(),jQuery(this).addClass("active-tab"),history.pushState({},"","#"+b)});var l=window.location.hash;if(l){var m=l.substring(1);m.includes("settings#")&&(m="settings"),jQuery(".wp-legalpages-admin-tab").removeClass("active-tab"),jQuery(".wp-legalpages-admin-tab-content").hide(),jQuery("#"+m).show(),jQuery('[data-tab="'+m+'"]').addClass("active-tab")}"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual"),window.addEventListener("message",function(b){if(b.isTrusted&&b.origin===wplp_localize_data.wplegal_app_url)if(b.data.success)a(b.data);else{const c=jQuery("#popup-site-excausted"),d=jQuery(".popup-image");c.fadeIn(),d.off("click").on("click",function(a){c.fadeOut()})}}),jQuery(".gdpr-start-auth").on("click",b),jQuery(".api-connect-to-account-btn").on("click",b),jQuery(".wplegal-api-connect-existing").on("click",b),jQuery(".gdpr-cookie-consent-admin-upgrade-button").on("click",c),jQuery(document).on("click",".wplegal-mascot-quick-links-item-upgrade",d),jQuery(document).on("click",".wplegalpages-admin-upgrade-button",d);var n=jQuery(".wp-legalpages-admin-fixed-banner");jQuery("#wplegal-wpcc-notice").insertAfter(n),jQuery("#wplegal-disconnect-wpcc-notice").insertAfter(n),k?(jQuery("#wplegal-wpcc-notice").removeClass("wplegal-hidden"),jQuery("#wplegal-wpcc-notice").show()):"true"===localStorage.getItem("wplegalDisconnect")&&(jQuery("#wplegal-disconnect-wpcc-notice").removeClass("wplegal-hidden"),jQuery("#wplegal-disconnect-wpcc-notice").show()),"true"===localStorage.getItem("wplegalConnectPopupHide")&&(jQuery("#wplegal-wpcc-notice").hide(),jQuery("#wplegal-disconnect-wpcc-notice").hide()),jQuery("#wplegal-wpcc-notice .notice-dismiss").on("click",e),jQuery("#wplegal-disconnect-wpcc-notice .notice-dismiss").on("click",f),jQuery(".wplegal-api-connection-disconnect-btn").on("click",g),jQuery(document).ready(function(a){if(jQuery('#toplevel_page_wp-legal-pages a[href="admin.php?page=wplp-dashboard#help-page"]').on("click",function(a){a.preventDefault(),jQuery("li").removeClass("current"),jQuery(this).closest("li").addClass("current"),jQuery(".wplegal-container").length>0&&(jQuery(".wplegal-container").hide(),jQuery(".wp-legalpages-admin-wplp-dashboard-tab").removeClass("active-tab"),jQuery(".wp-legalpages-admin-help-tab").addClass("active-tab")),jQuery("#help-page").show()}),window.location.href.includes("#help-page")){var b=jQuery('#toplevel_page_wp-legal-pages a[href="admin.php?page=wplp-dashboard#help-page"]'),c=jQuery('#toplevel_page_wp-legal-pages a[href="admin.php?page=wplp-dashboard"]');b.closest("li").addClass("current"),c.closest("li").removeClass("current")}a(".install-gdpr-button").on("click",function(b){b.preventDefault();var c=window.location.origin,d=c+"/wp-admin/admin.php?page=legal-pages",e=a(this);a.ajax({url:wplp_localize_data.ajaxurl,method:"POST",data:{action:"gdpr_install_plugin",plugin_slug:"gdpr-cookie-consent",_ajax_nonce:wplp_localize_data._ajax_nonce},beforeSend:function(){e.text("Installing...")},success:function(a){a.success&&(window.location.href=d)},error:function(){}})}),a("#support_form").on("submit",function(b){b.preventDefault();var c={action:"wplegalpages_support_request",name:a('input[name="sup-name"]').val(),email:a('input[name="sup-email"]').val(),message:a('textarea[name="sup-message"]').val(),wplegalpages_nonce:a('input[name="wplegalpages_nonce"]').val()};a(".notice").remove(),a.ajax({url:ajaxurl,type:"POST",data:c,success:function(b){b.success?a('<div class="notice notice-success is-dismissible"><p>'+b.data.message+"</p></div>").insertBefore("#support_form"):a('<div class="notice notice-error is-dismissible"><p>'+b.data.message+"</p></div>").insertBefore("#support_form")},error:function(){a('<div class="notice notice-error is-dismissible"><p>An unexpected error occurred. Please try again.</p></div>').insertBefore("#support_form")}})}),a(".wplegalpages-not-pro-tooltip").on("mouseenter",function(){a(this).siblings(".wplegalpages-not-pro-tooltip-text").stop(!0,!0).fadeIn(200)}),a(".wplegalpages-not-pro-tooltip, .wplegalpages-not-pro-tooltip-text").on("mouseleave",function(){const b=a(this).siblings(".wplegalpages-not-pro-tooltip-text").length?a(this).siblings(".wplegalpages-not-pro-tooltip-text"):a(this);setTimeout(function(){b.is(":hover")||b.siblings(".wplegalpages-not-pro-tooltip").is(":hover")||b.stop(!0,!0).fadeOut(200)},100)})})}),document.addEventListener("DOMContentLoaded",alignSideBar);