var jQuery=jQuery.noConflict(),jQuery=jQuery.noConflict();jQuery(document).ready(function(){function a(a){var b=jQuery('<div class="wplegal-ajax-spinner"></div>');jQuery("#wpbody-content").append(b),jQuery.ajax({type:"POST",url:wplp_localize_data.ajaxurl,data:{action:"wp_legal_pages_app_store_auth",_ajax_nonce:wplp_localize_data._ajax_nonce,response:a.response,origin:a.origin},success:function(a){b.hide(),localStorage.removeItem("wplegalConnectPopupHide"),localStorage.removeItem("wplegalDisconnect");var c=window.location.origin,d="/wp-admin/admin.php?page=legal-pages",e="#settings#general",f=c+d+e;setTimeout(function(){window.location.href=f,location.reload()},100)},error:function(a){console.error("Error sending data to PHP:",a)}})}function b(a){a.preventDefault();var b=this.classList.contains("wplegal-api-connect-new"),c=jQuery('<div class="wplegal-ajax-spinner"></div>'),d=jQuery("#wpbody-content");d.css("position","relative"),d.append(c),jQuery.ajax({url:wplp_localize_data.ajaxurl,type:"POST",data:{action:"wp_legal_pages_app_start_auth",_ajax_nonce:wplp_localize_data._ajax_nonce,is_new_user:b},beforeSend:function(){c.show()},complete:function(){c.hide()}}).done(function(a){var b=window.innerWidth,c=window.innerHeight,d=367,e=650,f=(b-d)/2,g=(c-e)/2,h=window.open(a.data.url,"_blank","location=no,width="+d+",height="+e+",left="+f+",top="+g+",scrollbars=0");null===h?console.log("Failed to open the authentication window"):h.focus()})}function c(a){a.preventDefault();var b=(this.classList.contains("wplegal-api-connect-new"),this.classList.contains("wplegalpages-connection-popup")),c=jQuery('<div class="wplegal-ajax-spinner"></div>'),d=jQuery("#wpbody-content");d.css("position","relative"),d.append(c),jQuery.ajax({url:wplp_localize_data.ajaxurl,type:"POST",data:{action:"wp_legal_pages_app_paid_start_auth",_ajax_nonce:wplp_localize_data._ajax_nonce,is_user_from_connection_popup:!!b},beforeSend:function(){c.show()},complete:function(){c.hide()}}).done(function(a){var b=window.innerWidth,c=window.innerHeight,d=1260,e=740,f=(b-d)/2,g=(c-e)/2;null==window.open(a.data.url,"_blank","location=no,width="+d+",height="+e+",left="+f+",top="+g+",scrollbars=0")&&console.log("error while opening the popup window")})}function d(){jQuery("#wplegal-wpcc-notice").hide(),localStorage.setItem("wplegalConnectPopupHide","true")}function e(){jQuery("#wplegal-disconnect-wpcc-notice").hide(),localStorage.setItem("wplegalConnectPopupHide","true")}function f(){var a=jQuery('<div class="wplegal-ajax-spinner"></div>'),b=jQuery(".wplegal-connection-tab-card");b.css("position","relative"),b.append(a),jQuery.ajax({url:wplp_localize_data.ajaxurl,type:"POST",data:{action:"wp_legal_pages_app_delete_auth",_ajax_nonce:wplp_localize_data._ajax_nonce},beforeSend:function(){a.show()},complete:function(){a.hide()}}).done(function(a){location.reload()})}const g=wplp_localize_data.is_pro_activated,h=wplp_localize_data.admin_url,i=wplp_localize_data.lp_terms,j=wplp_localize_data.is_user_connected;g&&(jQuery(".wp-legalpages-admin-tabs-section").addClass("pro-is-activated"),jQuery(".wp-legalpages-admin-tab").addClass("pro-is-activated")),"1"!=i&&(jQuery(".wp-legalpages-admin-tab .wp-legalpages-admin-tab-name").addClass("lp-terms-not-acpt"),jQuery(".wplegal-help-card").addClass("lp-terms-not-acpt"),jQuery(".wplegal-container .wplegal-container-features .wplegal-features-section .wplegal-section-content .wplegal-feature").addClass("lp-terms-not-acpt"),jQuery(".wp-legalpages-admin-help-and-support .wp-legalpages-admin-help-text").addClass("lp-terms-not-acpt"),jQuery(".wp-legalpages-admin-help-and-support .wp-legalpages-admin-support-text").addClass("lp-terms-not-acpt")),jQuery(".wp-legalpages-admin-tab-content").not(":first").hide(),jQuery(".wp-legalpages-admin-getting-started-tab").addClass("active-tab"),jQuery("#getting_started").show(),jQuery(".wp-legalpages-admin-create_legalpages-tab").on("click",function(){window.location.href=h+"index.php?page=wplegal-wizard"}),jQuery(".wp-legalpages-admin-tabs").on("click",".wp-legalpages-admin-tab:not(.wp-legalpages-admin-create_legalpages-tab)",function(a){a.preventDefault();var b=jQuery(this).data("tab");jQuery(".wp-legalpages-admin-tab").removeClass("active-tab"),jQuery(".wp-legalpages-admin-tab-content").hide(),jQuery("#"+b).show(),jQuery(this).addClass("active-tab"),history.pushState({},"","#"+b)});var k=window.location.hash;if(k){var l=k.substring(1);l.includes("settings#")&&(l="settings"),jQuery(".wp-legalpages-admin-tab").removeClass("active-tab"),jQuery(".wp-legalpages-admin-tab-content").hide(),jQuery("#"+l).show(),jQuery('[data-tab="'+l+'"]').addClass("active-tab")}"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual"),window.addEventListener("message",function(b){if(b.isTrusted&&b.origin===wplp_localize_data.wplegal_app_url)if(b.data.success)a(b.data);else{const c=jQuery("#popup-site-excausted"),d=jQuery(".popup-image");c.fadeIn(),d.off("click").on("click",function(a){c.fadeOut()})}}),jQuery(".gdpr-start-auth").on("click",b),jQuery(".api-connect-to-account-btn").on("click",b),jQuery(".wplegal-api-connect-existing").on("click",b),jQuery(document).on("click",".wplegal-mascot-quick-links-item-upgrade",c),jQuery(document).on("click",".wplegalpages-admin-upgrade-button",c);var m=jQuery(".wp-legalpages-admin-fixed-banner");jQuery("#wplegal-wpcc-notice").insertAfter(m),jQuery("#wplegal-disconnect-wpcc-notice").insertAfter(m),j?(jQuery("#wplegal-wpcc-notice").removeClass("wplegal-hidden"),jQuery("#wplegal-wpcc-notice").show()):"true"===localStorage.getItem("wplegalDisconnect")&&(jQuery("#wplegal-disconnect-wpcc-notice").removeClass("wplegal-hidden"),jQuery("#wplegal-disconnect-wpcc-notice").show()),"true"===localStorage.getItem("wplegalConnectPopupHide")&&(jQuery("#wplegal-wpcc-notice").hide(),jQuery("#wplegal-disconnect-wpcc-notice").hide()),jQuery("#wplegal-wpcc-notice .notice-dismiss").on("click",d),jQuery("#wplegal-disconnect-wpcc-notice .notice-dismiss").on("click",e),jQuery(".wplegal-api-connection-disconnect-btn").on("click",f)});